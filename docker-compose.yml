version: "2"

services: 
    surfshark:
        image: shown1985/docker-surfshark
        container_name: surfshark
        environment: 
            - SURFSHARK_USER=YOUR_OWN_SURFSARK_NAME       #Can be found in https://my.surfshark.com/vpn/manual-setup/
            - SURFSHARK_PASSWORD=YOUR_OWN_SURFSARK_PASSWORD 
            - SURFSHARK_COUNTRY=us
            - SURFSHARK_CITY=lax
            - CONNECTION_TYPE=tcp
            - LAN_NETWORK=172.17.0.0/24      #Optional - Used to access attached containers web ui
        cap_add: 
            - NET_ADMIN
        devices:
            - /dev/net/tun
        ports:
            - 8388:8388 #Port for ss
        restart: unless-stopped
        dns:
            - 8.8.8.8
            - 223.5.5.5
    # service_test:
    #     image: byrnedo/alpine-curl
    #     container_name: alpine
    #     command: -L 'https://ipinfo.io'
    #     depends_on: 
    #         - surfshark
    #     network_mode: service:surfshark
    #     restart: always
    ss:
        image: dockage/shadowsocks-server:latest
        container_name: ss    
        network_mode: service:surfshark
        restart: unless-stopped  